<!DOCTYPE html>
<html lang="en" style="margin:0;padding:0;">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no"/>
<title>Emoji Day Planner</title>
<style>
html,body {
  margin:0;padding:0;width:100%;height:100%;overflow:hidden;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  background:#90caf9;display:flex;flex-direction:column;
}

/* PIXEL-ART STYLING AND THEME */
/* The pixel-art style will be simulated using CSS: sharp corners, small sizes, and a retro palette. */
/* We'll use a subtle pixelated effect by scaling the UI slightly and avoiding smooth borders. */
body {
  image-rendering: pixelated;
}

#app {
  position:relative;width:100%;height:100%;
  display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
  touch-action:none;overflow:hidden;
}

/* Clouds - Pixel Art Style */
.cloudsContainer {
  position:absolute;top:0;left:0;width:200%;height:200%;pointer-events:none;z-index:-1;opacity:0.3;overflow:hidden;
}
.cloud {
  position:absolute;background:#ffffff;
  border-radius:0; /* pixel art: no rounding */
  width:20px;height:10px; /* small pixel-like clouds */
}
@keyframes moveLeft {0%{transform:translateX(0);}100%{transform:translateX(-100%);}}
@keyframes moveRight {0%{transform:translateX(-100%);}100%{transform:translateX(0);}}

/* Header (Pixel Art) */
.header {
  width:100%;display:flex;align-items:center;justify-content:space-between;
  padding:4px;box-sizing:border-box;background:#90caf9;
  border-bottom:2px solid #0066cc; /* pixel-art style border */
}
.header-left { display:flex;flex-direction:column; }
.header-title {
  font-size:8px;font-weight:bold;color:#ffffff;
  line-height:1;white-space:nowrap;letter-spacing:0px;
  text-shadow:1px 1px #0066cc; /* pixel-ish shadow */
}
.timeDisplay {
  color:#ffffff;font-weight:bold;font-size:8px;white-space:nowrap;
}

/* Top Layout */
.topSection {
  width:100%;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:2px;
  padding:2px;box-sizing:border-box;position:relative;
  background:#87CEEB; /* pixel sky */
  border-top:2px solid #0066cc;
}

/* Day Segments in Pixel-Art Boxes */
.segmentContainer {
  width:95%;background:#ffffff;display:flex;align-items:center;justify-content:flex-start;padding:2px;gap:2px;
  border:2px solid #0066cc; 
  box-sizing:border-box;
}
.segmentTitle {
  font-size:8px;font-weight:bold;color:#333;margin-right:2px;
  white-space:nowrap;
}
.placeholders {
  display:flex;flex-wrap:nowrap;gap:2px;align-items:center;justify-content:flex-start;
  flex:1;min-height:10px;
}
.placeholder {
  width:16px;height:16px;background:#89cfff;display:flex;align-items:center;justify-content:center;user-select:none;position:relative;
  font-size:10px;line-height:1;
  border:1px solid #0066cc;
}
.placeholder.glow {
  outline:1px dashed #fff;transform:scale(1.1);
}

/* Add Placeholder Button (Pixel Style) */
.addPlaceholderBtn {
  width:16px;height:16px;background:#4caf50;color:#fff;border:none;cursor:pointer;font-size:12px;line-height:16px;
  display:flex;align-items:center;justify-content:center;
  border:1px solid #0066cc;
}
.addPlaceholderBtn:active { transform:translate(1px,1px); }

/* Homework Button (Pixel Style) */
.homeworkBtn {
  width:95%;padding:2px;border:none;border:2px solid #0066cc;box-sizing:border-box;background:#ff5252;color:#ffffff;font-size:8px;cursor:pointer;margin:2px 0;
  display:flex;align-items:center;justify-content:center;gap:2px;font-weight:bold;
}
.homeworkBtn.done {
  background:#45d054;
}
.homeworkBtn:active { transform:translate(1px,1px); }

/* Reset Button (Hidden by default) */
.resetBtn {
  position:absolute;top:2px;right:2px;background:#4caf50;color:#ffffff;border:none;padding:1px 2px;border:1px solid #0066cc;cursor:pointer;font-size:6px;line-height:1;
  display:none;
}
.resetBtn:active { transform:translate(1px,1px); }

/* Emoji Deck (Pixel style, no search) */
.emojiDeckContainer {
  width:100%;flex:0 0 auto;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;
  position:relative;padding:2px;box-sizing:border-box;gap:2px;
  background:#87CEEB; 
  border-top:2px solid #0066cc;
}

.arrowsContainer {
  width:95%;display:flex;align-items:center;justify-content:space-between;
  padding:1px 0;
}
.arrowBtn {
  border:none;cursor:pointer;font-size:8px;line-height:1;color:#ffffff;
  background:none; /* no background color */
  text-shadow:1px 1px #0066cc;
}
.arrowBtn:active { transform:translate(1px,1px); }

.categoryLabel {
  font-size:8px;color:#ffffff;font-weight:bold;
  white-space:nowrap;text-shadow:1px 1px #0066cc;
}

.emoji-grid {
  width:95%;display:grid;grid-template-columns:repeat(auto-fit, minmax(16px,1fr));
  grid-auto-rows:16px;gap:2px;justify-items:center;align-items:center;
  border:2px solid #0066cc; background:#ffffff;
  padding:2px;box-sizing:border-box;
}
.emojiItem {
  width:100%;height:100%;background:#89cfff;display:flex;align-items:center;justify-content:center;
  user-select:none;font-size:10px;cursor:pointer;touch-action:none;
  border:1px solid #0066cc;
}

/* Tutorial and Start Box */
#tutorialOverlay {
  position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);color:#ffffff;
  display:none;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;z-index:999;
}
.tutorialContent {
  background:#ffffff;padding:4px;border:2px solid #0066cc;max-width:90%;width:100px;color:#333;text-align:center;font-size:8px;
}
.tutorialButton {
  background:#4caf50;color:#ffffff;padding:1px 2px;border:1px solid #0066cc;cursor:pointer;font-size:8px;font-weight:bold;margin-top:2px;display:inline-block;
}
.tutorialButton:active { transform:translate(1px,1px); }

/* Start Box for "Ready" */
#startBox {
  position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:1000;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
}
.startContent {
  background:#ffffff;padding:4px;border:2px solid #0066cc;width:120px;color:#333;text-align:center;font-size:8px;
}
.startButton {
  background:#4caf50;color:#ffffff;padding:1px 2px;border:1px solid #0066cc;cursor:pointer;font-size:8px;font-weight:bold;margin-top:2px;display:inline-block;
}
.startButton:active { transform:translate(1px,1px); }

/* Ghost Tutorial Scenes */
.ghostScene {
  position:absolute;top:0;left:0;width:100%;height:100%;z-index:1100;pointer-events:none;
  display:none;flex-direction:column;align-items:center;justify-content:center;
}
.ghost {
  width:20px;height:20px;background:#fff;border:1px solid #333;display:flex;align-items:center;justify-content:center;font-size:12px;line-height:1;
  position:absolute;transition:transform 0.3s;
}

/* Confetti */
.confetti-container {
  pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:998;
}
.confetti {
  position:absolute;width:3px;height:3px;background:#ff0;animation:fall 3s linear infinite;
}

@keyframes fall {
  0%{opacity:1;transform:translateY(-10px);}
  100%{opacity:0;transform:translateY(100vh);}
}

/* Wubble Animation for thumbs-up once */
@keyframes wubble {
  0%,100% {transform:scale(1);}
  50% {transform:scale(1.3);}
}
</style>
</head>
<body>
<div id="app">
  <div class="cloudsContainer" id="clouds"></div>
  <div class="header">
    <div class="header-left">
      <div class="header-title">Emoji Day Planner</div>
    </div>
    <div class="timeDisplay" id="time-display">00:00</div>
  </div>

  <button class="resetBtn" id="reset-all" aria-label="Reset All" style="display:none;">Reset</button>

  <div class="topSection">
    <div class="segmentContainer" data-segment="Morning">
      <div class="segmentTitle">Morning</div>
      <div class="placeholders" data-segment="Morning"></div>
      <button class="addPlaceholderBtn" data-segment="Morning">+</button>
    </div>
    <div class="segmentContainer" data-segment="Midday">
      <div class="segmentTitle">Midday</div>
      <div class="placeholders" data-segment="Midday"></div>
      <button class="addPlaceholderBtn" data-segment="Midday">+</button>
    </div>
    <div class="segmentContainer" data-segment="Evening">
      <div class="segmentTitle">Evening</div>
      <div class="placeholders" data-segment="Evening"></div>
      <button class="addPlaceholderBtn" data-segment="Evening">+</button>
    </div>
    <button class="homeworkBtn" id="homework-btn" aria-label="Homework Toggle">Homework</button>
  </div>

  <div class="emojiDeckContainer">
    <div class="arrowsContainer">
      <button class="arrowBtn" id="left-arrow" aria-label="Previous Category">‚óÄÔ∏è</button>
      <div class="categoryLabel" id="category-label">Category 1/6</div>
      <button class="arrowBtn" id="right-arrow" aria-label="Next Category">‚ñ∂Ô∏è</button>
    </div>
    <div id="emoji-deck" class="emoji-grid"></div>
  </div>

  <div class="confetti-container" id="confetti"></div>

  <div id="tutorialOverlay">
    <div class="tutorialContent" id="tutorialContent">
      <!-- This will be used after the 12-second auto tutorial -->
      <div>üëª Drag & Drop, Double-tap to remove, + to add, Homework = Confetti!</div>
      <button class="tutorialButton" id="tutorial-close">Got it!</button>
    </div>
  </div>

  <div id="startBox">
    <div class="startContent">
      Welcome to the Emoji Day Planner!  
      <br>Arrange your day with fun emojis.
      <br>Tap "Ready" to see a special 12s live ghost demo!
      <button class="startButton" id="start-ready">Ready</button>
    </div>
  </div>

  <!-- Ghost Scene for 12s tutorial -->
  <div class="ghostScene" id="ghostScene">
    <!-- The ghost and animation steps will be handled by JS -->
    <div class="ghost" id="ghostElem">üëª</div>
  </div>
</div>

<script>
(function(){
  /* Implementing all requirements */

  /* Data Setup */
  // Replace initial "events" with more day-to-day activity emojis: walking, yoga, dinner, swimming, etc.
  // We'll just pick some emojis close to that theme:
  const eventsSet = [
    {char:"üö∂‚Äç‚ôÇÔ∏è",name:"walking"},{char:"üßò‚Äç‚ôÄÔ∏è",name:"yoga"},{char:"üçΩÔ∏è",name:"dinner"},{char:"üèä‚Äç‚ôÇÔ∏è",name:"swimming"},{char:"üö¥‚Äç‚ôÇÔ∏è",name:"cycling"}
  ];
  const baseSet = eventsSet.concat([
    {char:"üòÄ",name:"happy"},{char:"üòÇ",name:"laugh"},{char:"üòä",name:"smile"},{char:"ü•∞",name:"love"},{char:"üòç",name:"inlove"},
    {char:"‚úàÔ∏è",name:"travel"},{char:"üöó",name:"car"},{char:"üöÇ",name:"train"},{char:"üöá",name:"metro"},{char:"üõ≥Ô∏è",name:"ship"},
    {char:"üé®",name:"art"},{char:"üé∏",name:"guitar"},{char:"üéª",name:"violin"},{char:"üéπ",name:"piano"},{char:"üñåÔ∏è",name:"brush"},
    {char:"üíª",name:"laptop"},{char:"üì±",name:"phone"},{char:"üé•",name:"video"},{char:"üñ•Ô∏è",name:"desktop"},{char:"üì°",name:"satellite"},
    {char:"üì¶",name:"box"},{char:"üéÅ",name:"gift"},{char:"üõçÔ∏è",name:"bag"},{char:"üéÄ",name:"ribbon"},{char:"üìö",name:"books"}
  ]);

  function expandCategory(base) {
    let arr=[];
    for(let i=0;i<100;i++){
      arr.push(base[i%base.length]);
    }
    return arr;
  }

  const categories=["events","emotion","travel","art","tech","objects"];
  const emojiData={
    "events":expandCategory(eventsSet),
    "emotion":expandCategory(baseSet.slice(5,10)),
    "travel":expandCategory(baseSet.slice(10,15)),
    "art":expandCategory(baseSet.slice(15,20)),
    "tech":expandCategory(baseSet.slice(20,25)),
    "objects":expandCategory(baseSet.slice(25,30))
  };

  let currentCategoryIndex=0;
  let currentDeck=[];
  let searchTerm="";
  let homeworkActive=false;
  let tutorialActive=false; // after 12s scene
  let tutorialShown=false;

  let placeholdersData={
    "Morning":[{char:null}],
    "Midday":[{char:null}],
    "Evening":[{char:null}]
  };

  const timeDisplay=document.getElementById('time-display');
  const resetAllBtn=document.getElementById('reset-all');
  const homeworkBtn=document.getElementById('homework-btn');
  const leftArrow=document.getElementById('left-arrow');
  const rightArrow=document.getElementById('right-arrow');
  const categoryLabel=document.getElementById('category-label');
  const emojiDeck=document.getElementById('emoji-deck');
  const tutorialOverlay=document.getElementById('tutorialOverlay');
  const tutorialClose=document.getElementById('tutorial-close');
  const confettiContainer=document.getElementById('confetti');
  const startBox=document.getElementById('startBox');
  const startReady=document.getElementById('start-ready');
  const ghostScene=document.getElementById('ghostScene');
  const ghostElem=document.getElementById('ghostElem');

  function updateTime(){
    const now=new Date();
    const hh=String(now.getHours()).padStart(2,'0');
    const mm=String(now.getMinutes()).padStart(2,'0');
    timeDisplay.textContent=`${hh}:${mm}`;
  }
  setInterval(updateTime,60000);
  updateTime();

  function loadCategory(index){
    const cat=categories[index];
    currentDeck=emojiData[cat];
    categoryLabel.textContent=cat.charAt(0).toUpperCase()+cat.slice(1)+" "+(index+1)+"/"+categories.length;
    renderDeck();
  }

  function renderDeck(){
    emojiDeck.innerHTML="";
    // searchTerm removed - no search
    const filtered=currentDeck; // no filtering now
    filtered.forEach((em)=>{
      const div=document.createElement('div');
      div.className='emojiItem';
      div.textContent=em.char;
      div.setAttribute('data-name',em.name);
      div.addEventListener('touchstart',onEmojiTouchStart,{passive:false});
      emojiDeck.appendChild(div);
    });
  }

  /* Advanced Drag & Drop with Scaling, Magnet, and Pseudo-Haptics */
  let draggingEmoji=null;
  let dragOffsetX=0;
  let dragOffsetY=0;
  let dragStartX=0;
  let dragStartY=0;

  function onEmojiTouchStart(e){
    if(e.touches.length>1)return;
    const target=e.currentTarget;
    draggingEmoji=target.cloneNode(true);
    // Enlarge and style
    draggingEmoji.style.position='fixed';
    draggingEmoji.style.zIndex='1000';
    draggingEmoji.style.left=(e.touches[0].clientX -8)+'px';
    draggingEmoji.style.top=(e.touches[0].clientY -8)+'px';
    draggingEmoji.style.transition='none';
    draggingEmoji.style.transform='scale(1.5)'; // enlarge under finger
    draggingEmoji.style.border='2px solid #fff';
    draggingEmoji.style.boxShadow='0 0 4px #000';
    dragStartX=e.touches[0].clientX;
    dragStartY=e.touches[0].clientY;
    dragOffsetX = e.touches[0].clientX - parseInt(draggingEmoji.style.left);
    dragOffsetY = e.touches[0].clientY - parseInt(draggingEmoji.style.top);
    document.body.appendChild(draggingEmoji);

    // Simulate haptic feedback (not possible in code, but we trust iOS or we can just mention it)
    // In real iOS PWA: navigator.vibrate(10); 
    document.addEventListener('touchmove',onEmojiTouchMove,{passive:false});
    document.addEventListener('touchend',onEmojiTouchEnd,{passive:false});
    e.preventDefault();
  }

  function onEmojiTouchMove(e){
    if(!draggingEmoji)return;
    e.preventDefault();
    const x=e.touches[0].clientX - dragOffsetX;
    const y=e.touches[0].clientY - dragOffsetY;
    draggingEmoji.style.left=x+'px';
    draggingEmoji.style.top=y+'px';
    updatePlaceholderGlow(x,y,true);
  }

  function onEmojiTouchEnd(e){
    if(!draggingEmoji)return;
    const x=parseInt(draggingEmoji.style.left);
    const y=parseInt(draggingEmoji.style.top);
    if(!dropEmojiInPlaceholder(x,y)){
      // animate return
      draggingEmoji.style.transition='transform 0.2s, left 0.2s, top 0.2s';
      draggingEmoji.style.transform='scale(1)';
      draggingEmoji.style.left=dragStartX+'px';
      draggingEmoji.style.top=dragStartY+'px';
      setTimeout(()=>{
        if(draggingEmoji && draggingEmoji.parentElement)document.body.removeChild(draggingEmoji);
      },200);
    }
    draggingEmoji=null;
    document.removeEventListener('touchmove',onEmojiTouchMove);
    document.removeEventListener('touchend',onEmojiTouchEnd);
    updatePlaceholderGlow(0,0,false,true);
  }

  function updatePlaceholderGlow(x,y,dragging,clear=false){
    const allPh=document.querySelectorAll('.placeholder');
    allPh.forEach(ph=>{
      ph.classList.remove('glow');
      if(draggingEmoji&&dragging){
        const rect=ph.getBoundingClientRect();
        const dist=Math.hypot((rect.x+rect.width/2)-(x+8),(rect.y+rect.height/2)-(y+8));
        if(dist<30) ph.classList.add('glow');
      }
      if(clear) ph.classList.remove('glow');
    });
  }

  function dropEmojiInPlaceholder(x,y){
    const allPh=document.querySelectorAll('.placeholder');
    for(let ph of allPh){
      const rect=ph.getBoundingClientRect();
      const dist=Math.hypot((rect.x+rect.width/2)-(x+8),(rect.y+rect.height/2)-(y+8));
      if(dist<30){
        const seg=ph.parentElement.getAttribute('data-segment');
        const idx=parseInt(ph.getAttribute('data-index'));
        const emoji=draggingEmoji.textContent;
        placeholdersData[seg][idx].char=emoji;
        renderPlaceholders();
        // On drop animate it nicely
        return true;
      }
    }
    return false;
  }

  function renderPlaceholders(){
    ["Morning","Midday","Evening"].forEach(seg=>{
      const container=document.querySelector('.placeholders[data-segment="'+seg+'"]');
      container.innerHTML="";
      placeholdersData[seg].forEach((p,i)=>{
        const ph=document.createElement('div');
        ph.className='placeholder';
        ph.setAttribute('data-index',i);
        if(p.char) ph.textContent=p.char;
        ph.addEventListener('touchstart',(ev)=>onPlaceholderTouchStart(ev,seg,i),{passive:false});
        container.appendChild(ph);
      });
    });
  }

  let doubleTapTimeout=null;
  let lastPlaceholderTapped=null;
  function onPlaceholderTouchStart(e,seg,i){
    if(e.touches.length>1)return;
    e.preventDefault();
    const target=e.currentTarget;
    if(doubleTapTimeout && lastPlaceholderTapped===target){
      placeholdersData[seg][i].char=null;
      renderPlaceholders();
      clearTimeout(doubleTapTimeout);
      doubleTapTimeout=null;
      lastPlaceholderTapped=null;
    } else {
      lastPlaceholderTapped=target;
      doubleTapTimeout=setTimeout(()=>{
        doubleTapTimeout=null;
        lastPlaceholderTapped=null;
      },300);
    }
  }

  function switchCategory(dir){
    currentCategoryIndex=(currentCategoryIndex+dir+categories.length)%categories.length;
    loadCategory(currentCategoryIndex);
    launchConfetti();
  }

  function addPlaceholder(seg){
    placeholdersData[seg].push({char:null});
    renderPlaceholders();
  }

  function resetAll(){
    placeholdersData={
      "Morning":[{char:null}],
      "Midday":[{char:null}],
      "Evening":[{char:null}]
    };
    loadCategory(currentCategoryIndex);
    renderPlaceholders();
  }

  function toggleHomework(){
    homeworkActive=!homeworkActive;
    if(homeworkActive){
      homeworkBtn.classList.add('done');
      homeworkBtn.textContent="Homework üëç";
      // Wubble animation once
      homeworkBtn.style.animation='wubble 0.5s ease';
      setTimeout(()=>{
        homeworkBtn.style.animation='none';
      },500);
      launchConfetti();
    } else {
      homeworkBtn.classList.remove('done');
      homeworkBtn.textContent="Homework";
    }
  }

  function launchConfetti(){
    for(let i=0;i<20;i++){
      const c=document.createElement('div');
      c.className='confetti';
      c.style.left=Math.random()*100+"%";
      c.style.backgroundColor=`hsl(${Math.random()*360},100%,50%)`;
      c.style.animationDelay=(Math.random()*1)+"s";
      confettiContainer.appendChild(c);
      setTimeout(()=>{if(confettiContainer.contains(c))confettiContainer.removeChild(c);},3000);
    }
  }

  function createClouds(){
    const container=document.getElementById('clouds');
    for(let i=0;i<10;i++){
      const c=document.createElement('div');
      c.className='cloud';
      const size=(20+Math.random()*10);
      c.style.width=size+"px";
      c.style.height=(size/2)+"px";
      c.style.top=(Math.random()*200)+"px";
      c.style.left=(Math.random()*200)+"px";
      c.style.opacity=(0.3+Math.random()*0.7);
      c.style.animation=(i%2===0)?"moveLeft 30s linear infinite":"moveRight 40s linear infinite";
      container.appendChild(c);
    }
  }

  document.querySelectorAll('.addPlaceholderBtn').forEach(btn=>{
    btn.addEventListener('click',()=>addPlaceholder(btn.getAttribute('data-segment')));
  });

  leftArrow.addEventListener('click',()=>switchCategory(-1));
  rightArrow.addEventListener('click',()=>switchCategory(1));
  homeworkBtn.addEventListener('click',toggleHomework);

  tutorialClose.addEventListener('click',()=>{
    tutorialOverlay.style.display='none';
    tutorialActive=true;
  });

  // Start box ready button -> triggers 12s ghost tutorial scene
  startReady.addEventListener('click',()=>{
    startBox.style.display='none';
    runGhostTutorial();
  });

  function runGhostTutorial(){
    ghostScene.style.display='flex';
    // The ghost will perform a sequence of actions over 12s:
    // Timeline (approx):
    // 0-2s: Ghost appears near emoji deck.
    // 2-5s: Ghost picks an emoji (simulate drag), moves it to Morning placeholder.
    // 5-7s: Ghost toggles Homework.
    // 7-9s: Ghost taps + on Midday.
    // 9-12s: Ghost ends tutorial, disappears, show tutorialOverlay with instructions.

    let morningPl = document.querySelector('.placeholders[data-segment="Morning"] .placeholder');
    let deckRect=emojiDeck.getBoundingClientRect();
    let morningRect=morningPl.getBoundingClientRect();

    ghostElem.style.left=(deckRect.left+deckRect.width/2 -10)+'px';
    ghostElem.style.top=(deckRect.top+deckRect.height/2 -10)+'px';

    setTimeout(()=>{
      // Move ghost to emoji deck top-left item
      let firstEmoji = emojiDeck.querySelector('.emojiItem');
      if(firstEmoji){
        let feRect=firstEmoji.getBoundingClientRect();
        ghostElem.style.transform=`translate(${feRect.left-(deckRect.left+deckRect.width/2)+10}px,${feRect.top-(deckRect.top+deckRect.height/2)+10}px)`;
      }
    },2000);

    setTimeout(()=>{
      // Move ghost towards Morning placeholder
      ghostElem.style.transform=`translate(${morningRect.left-(deckRect.left+deckRect.width/2)}px,${morningRect.top-(deckRect.top+deckRect.height/2)}px)`;
    },5000);

    setTimeout(()=>{
      // Homework toggle
      ghostElem.style.transform='translate(0,0)'; // back to center maybe or near homework button
      homeworkBtn.click();
    },7000);

    setTimeout(()=>{
      // Add placeholder in Midday
      let middayPlus=document.querySelector('.addPlaceholderBtn[data-segment="Midday"]');
      let mpRect=middayPlus.getBoundingClientRect();
      ghostElem.style.transform=`translate(${mpRect.left-(deckRect.left+deckRect.width/2)}px,${mpRect.top-(deckRect.top+deckRect.height/2)}px)`;
      setTimeout(()=>{middayPlus.click();},1500);
    },9000);

    setTimeout(()=>{
      ghostScene.style.display='none';
      tutorialOverlay.style.display='flex';
    },12000);
  }

  loadCategory(currentCategoryIndex);
  renderPlaceholders();
  createClouds();
})();
</script>
</body>
</html>
